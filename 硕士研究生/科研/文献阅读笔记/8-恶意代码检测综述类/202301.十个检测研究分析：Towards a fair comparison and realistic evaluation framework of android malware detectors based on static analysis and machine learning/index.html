<!doctype html>
<html lang="zh-CN">
<head>
<title>202301.十个检测研究分析：Towards a fair comparison and realistic evaluation framework of android malware detectors based on static analysis and machine learning</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script async type="module">import mermaid from"https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs"</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" integrity="sha512-hpZ5pDCF2bRCweL5WoA0/N1elet1KYL5mx3LP555Eg/0ZguaHawxNvEjF6O3rufAChs16HVNhEc6blF/rZoowQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-sv0slik/5O0JIPdLBCR2A3XDg/1U3WuDEheZfI/DI5n8Yqc3h5kjrnr46FGBNiUAJF7rE4LHKwQ/SoSLRKAxEA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="https://cdn.jsdelivr.net/npm/lucide@0.115.0/dist/umd/lucide.min.js"></script>
<script>window.addEventListener("load",(()=>{document.querySelectorAll(".callout").forEach((e=>{const t=getComputedStyle(e).getPropertyValue("--callout-icon"),l=t&&t.trim().replace(/^lucide-/,"");if(l){const t=e.querySelector(".callout-title");if(t){const e=document.createElement("div"),c=document.createElement("i");e.appendChild(c),c.setAttribute("icon-name",l),e.setAttribute("class","callout-icon"),t.insertBefore(e,t.firstChild)}}})),lucide.createIcons(),Array.from(document.querySelectorAll(".callout.is-collapsible")).forEach((e=>{e.querySelector(".callout-title").addEventListener("click",(t=>{e.classList.contains("is-collapsed")?e.classList.remove("is-collapsed"):e.classList.add("is-collapsed")}))}))}))</script>
<script async src="https://fastly.jsdelivr.net/npm/force-graph@1.43.0/dist/force-graph.min.js"></script>
<script async src="https://fastly.jsdelivr.net/npm/@alpinejs/persist@3.11.1/dist/cdn.min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/alpinejs@3.11.1/dist/cdn.min.js" async></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerpolicy="no-referrer" async>
<script src="https://fastly.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.min.js" crossorigin="anonymous" referrerpolicy="no-referrer" async></script>
<link href="/styles/digital-garden-base.css" rel="stylesheet">
<link href="/styles/obsidian-base.css" rel="stylesheet">
<link href="/styles/_theme.74516f71.css" rel="stylesheet">
<link href="/styles/custom-style.css" rel="stylesheet">
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="manifest" href="/manifest.webmanifest">
<style></style>
<style></style>
</head>
<body class="theme-dark markdown-preview-view markdown-rendered markdown-preview-section css-settings-manager mod-windows is-frameless is-maximized is-hidden-frameless is-focused obsidian-app theme-light show-inline-title show-ribbon show-view-header css-settings-manager theme-default line-style-solid folder-default blockquote-normal callout-normal checkbox-default tag-default link-default heading-default responsive-tile-height oz-show-all-num">
<nav class="navbar">
<div class="navbar-inner">
<a href="/" style="text-decoration:none">
<h1 style="margin:15px!important">czc&#39;s digital garden</h1>
</a>
</div>
<div class="search-button align-icon" onclick="toggleSearch()">
<span class="search-icon">
<i icon-name="search"></i>
</span>
<span class="search-text">
<span>Search</span>
<span style="font-size:.6rem;padding:2px 2px 0 6px;text-align:center;transform:translateY(4px)" class="search-keys">
CTRL + K
</span>
</span>
</div>
</nav>
<div class="search-container" id="globalsearch" onclick="toggleSearch()">
<div class="search-box">
<input type="search" id="term" placeholder="Start typing...">
<div id="search-results"></div>
<footer class="search-box-footer">
<div class="navigation-hint">
<span>Enter to select</span>
</div>
<div class="navigation-hint align-icon">
<i icon-name="arrow-up" aria-hidden="true"></i>
<i icon-name="arrow-down" aria-hidden="true"></i>
<span>to navigate</span>
</div>
<div class="navigation-hint">
<span>ESC to close</span>
</div>
</footer>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js"></script>
<script>document.addEventListener("DOMContentLoaded",init,!1),document.addEventListener("DOMContentLoaded",setCorrectShortcut,!1),window.toggleSearch=function(){document.getElementById("globalsearch").classList.contains("active")?document.getElementById("globalsearch").classList.remove("active"):(document.getElementById("globalsearch").classList.add("active"),document.getElementById("term").focus())},window.toggleTagSearch=function(e){console.log(e.textContent);const t=e.textContent;t&&(window.document.getElementById("term").value=t.trim(),window.toggleSearch(),window.search())};const loadingSvg='\n    <svg width="100" height="100" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg" stroke="#fff">\n      <g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2">\n          <circle cx="22" cy="22" r="6" stroke-opacity="0">\n              <animate attributeName="r"\n                   begin="1.5s" dur="3s"\n                   values="6;22"\n                   calcMode="linear"\n                   repeatCount="indefinite" />\n              <animate attributeName="stroke-opacity"\n                   begin="1.5s" dur="3s"\n                   values="1;0" calcMode="linear"\n                   repeatCount="indefinite" />\n              <animate attributeName="stroke-width"\n                   begin="1.5s" dur="3s"\n                   values="2;0" calcMode="linear"\n                   repeatCount="indefinite" />\n          </circle>\n          <circle cx="22" cy="22" r="6" stroke-opacity="0">\n              <animate attributeName="r"\n                   begin="3s" dur="3s"\n                   values="6;22"\n                   calcMode="linear"\n                   repeatCount="indefinite" />\n              <animate attributeName="stroke-opacity"\n                   begin="3s" dur="3s"\n                   values="1;0" calcMode="linear"\n                   repeatCount="indefinite" />\n              <animate attributeName="stroke-width"\n                   begin="3s" dur="3s"\n                   values="2;0" calcMode="linear"\n                   repeatCount="indefinite" />\n          </circle>\n          <circle cx="22" cy="22" r="8">\n              <animate attributeName="r"\n                   begin="0s" dur="1.5s"\n                   values="6;1;2;3;4;5;6"\n                   calcMode="linear"\n                   repeatCount="indefinite" />\n          </circle>\n      </g>\n  </svg>';function debounce(e,t,n){var a;return function(){var r=this,i=arguments,c=n&&!a;clearTimeout(a),a=setTimeout((function(){a=null,n||e.apply(r,i)}),t),c&&e.apply(r,i)}}function setCorrectShortcut(){navigator.platform.toUpperCase().indexOf("MAC")>=0&&document.querySelectorAll(".search-keys").forEach((e=>e.innerHTML="⌘ + K"))}function createIndex(e){const t=e=>e.toLowerCase().split(/([^a-z]|[^\x00-\x7F])/),n=new FlexSearch.Document({cache:!0,charset:"latin:extra",optimize:!0,index:[{field:"content",tokenize:"reverse",encode:t},{field:"title",tokenize:"forward",encode:t},{field:"tags",tokenize:"forward",encode:t}]});return e.forEach(((e,t)=>{n.add({id:t,title:e.title,content:e.content,tags:e.tags})})),n}async function init(){let e=!0;if(localStorage.getItem("searchIndex")){let{date:t,docs:n}=JSON.parse(localStorage.getItem("searchIndex"));if("2025-06-04T07:30:42.353Z"===t){e=!1;let t=createIndex(n);window.docs=n,window.index=t}}if(e){let e=await(await fetch("/searchIndex.json?v=2025-06-04T07:30:42.353Z")).json(),t=createIndex(e);localStorage.setItem("searchIndex",JSON.stringify({date:"2025-06-04T07:30:42.353Z",docs:e})),window.docs=e,window.index=t}document.addEventListener("keydown",(e=>{if((e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),toggleSearch()),"Escape"===e.key&&document.getElementById("globalsearch").classList.remove("active"),document.getElementById("globalsearch").classList.contains("active")){if("ArrowDown"===e.key){e.preventDefault();let t=document.querySelector(".searchresult.active");t?(t.classList.remove("active"),t.nextElementSibling?t.nextElementSibling.classList.add("active"):document.querySelector(".searchresult").classList.add("active")):document.querySelector(".searchresult").classList.add("active");let n=document.querySelector(".searchresult.active");n&&n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}if("ArrowUp"===e.key){e.preventDefault();let t=document.querySelector(".searchresult.active");t?(t.classList.remove("active"),t.previousElementSibling?t.previousElementSibling.classList.add("active"):document.querySelectorAll(".searchresult").forEach((e=>{e.nextElementSibling||e.classList.add("active")}))):document.querySelectorAll(".searchresult").forEach((e=>{e.nextElementSibling&&e.classList.add("active")}));let n=document.querySelector(".searchresult.active");n&&n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}if("Enter"===e.key){e.preventDefault();let t=document.querySelector(".searchresult.active");t&&(window.location.href=t.querySelector("a").href)}}}));const t=debounce(search,200,!1);field=document.querySelector("#term"),field.addEventListener("keydown",(e=>{"ArrowDown"!==e.key&&"ArrowUp"!==e.key&&t()})),resultsDiv=document.querySelector("#search-results");const n=new URL(location.href).searchParams;n.get("q")&&(field.setAttribute("value",n.get("q")),toggleSearch(),search())}async function search(){let e=field.value.trim();if(!e)return;if(e==lastSearch)return;console.log(`search for ${e}`),window.lastSearch=e,resultsDiv.innerHTML=loadingSvg;let t=offlineSearch(e),n="";if(!t.length){let t=document.createElement("p");return t.innerText=`No results for "${e}"`,resultsDiv.innerHTML="",void resultsDiv.appendChild(t)}n+='<div style="max-width:100%;">',t.forEach((e=>{e.tags&&e.tags.length>0?n+=`<div class="searchresult">\n                    <a class="search-link" href="${e.url}">${e.title}</a>\n                    <div onclick="window.location='${e.url}'">\n                        <div class="header-meta">\n                            <div class="header-tags">\n                                ${e.tags.map((e=>'<a class="tag" href="JavaScript:Void(0);">#'+e+"</a>")).join("")}\n                            </div>\n                        </div>\n                        ${e.content}\n                    </div>\n                </div>`:n+=`<div class="searchresult">\n                    <a class="search-link" href="${e.url}">${e.title}</a>\n                    <div onclick="window.location='${e.url}'">\n                        ${e.content}\n                    </div>\n                </div>`})),n+="</div>",resultsDiv.innerHTML=n}function truncate(e,t){return(e=e.replaceAll(/<[^>]*>/g,"")).length<t?e:e.substring(0,t-3)+"..."}function offlineSearch(e){let t=window.docs,n="#"===e[0]&&e.length>1?index.search(e.substring(1),[{field:"tags"}]):index.search(e,[{field:"title",limit:5},{field:"content",weight:10}]);const a=e=>{const t=n.filter((t=>t.field===e));return 0===t.length?[]:[...t[0].result]};return[...new Set([...a("title"),...a("content"),...a("tags")])].map((e=>{let n=t[e];return n.content=truncate(n.content,400),n.tags=n.tags.filter((e=>"gardenEntry"!=e&&"note"!=e)),n}))}window.lastSearch=""</script>
<main class="content cm-s-obsidian">
<header>
<h1 data-note-icon="">202301.十个检测研究分析：Towards a fair comparison and realistic evaluation framework of android malware detectors based on static analysis and machine learning</h1>
<div class="header-meta">
<div class="header-tags">
</div>
<div class="timestamps"><div><i icon-name="calendar-plus"></i> <span class="human-date" data-date="2024-06-18T17:45:27.058+08:00"></span></div><div><i icon-name="calendar-clock"></i> <span class="human-date" data-date="2024-12-08T12:30:21.281+08:00"></span></div></div></div>
</header>
<p>老章汇报的概念漂移<a href="%E6%A6%82%E5%BF%B5%E6%BC%82%E7%A7%BB%E5%A4%84%E7%90%86%EF%BC%9AEfficient%20Concept%20Drift%20Handling%20for%20Batch%20Android%20Malware%20Detection%20Models.md" target="_blank" class="external-link">概念漂移处理论文</a>的上一代项目</p>
<p>源码：androidmaldet_comparative-main<br>
源码地址：<a href="https://gitlab.com/serralba/androidmaldet_comparative" target="_blank" class="external-link">Borja Molina Coronado / AndroidMalDet_Comparative · GitLab</a></p>
<h1 id="实操笔记" tabindex="-1">实操笔记</h1>
<p>Towards a fair comparison and realistic evaluation framework of android malware detectors based on static analysis and machine learning<br>
基于静态分析和机器学习的 Android 恶意软件检测器的公平比较和现实评估框架</p>
<p>安装环境的命令<br>
python.exe -m pip install --upgrade pip<br>
pip install numpy -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" class="external-link">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>
pip install pomegranate -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" class="external-link">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>
pip install networkx -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" class="external-link">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>
pip install androguard -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" class="external-link">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>
pip install rotation_forest -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" class="external-link">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>
pip install lief -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" class="external-link">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>
pip install python-magic -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" class="external-link">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>
pip install scikit-learn -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple/" target="_blank" class="external-link">https://pypi.tuna.tsinghua.edu.cn/simple/</a></p>
<hr>
<h1 id="翻译" tabindex="-1">翻译</h1>
<h1 id="android" tabindex="-1">基于静态分析和机器学习的 Android 恶意软件检测器的公平比较和现实评估框架</h1>
<p>摘要翻译：<br>
与其他网络安全领域一样，机器学习 (ML) 技术已成为检测 Android 恶意软件的有前景的解决方案。从这个意义上说，迄今为止已经提出了许多采用各种算法和功能集的提案，通常报告了令人印象深刻的检测性能。然而，缺乏可重复性和缺乏标准的评估框架使得这些建议难以进行比较。<strong>在本文中，我们使用通用评估框架对 10 项有影响力的 Android 恶意软件检测研究工作进行了分析</strong>。我们已经确定了五个因素，如果在创建数据集和设计检测器时不考虑这些因素，将会显着影响经过训练的 ML 模型及其性能。特别是，我们分析了以下因素的影响：(1) 重复样本的存在，(2) 标签（好软件/灰色软件/恶意软件）归因，(3) 类别不平衡，(4) 使用规避技术的应用程序的存在，以及（ 5）应用程序的演变。基于这项广泛的实验，我们得出的结论是，所研究的基于机器学习的检测器已经得到了乐观的评估，这证明了所发表的良好结果是合理的。我们的研究结果还强调，考虑到上述因素，必须生成现实的实验场景，以促进更好的基于 ML 的 Android 恶意软件检测解决方案的兴起。</p>
<p><strong>10 项检测研究分析</strong></p>
<h1 id="介绍" tabindex="-1">介绍</h1>
<div class="callout is-collapsible is-collapsed" data-callout="tip"><div class="callout-title"><div class="callout-title-inner"> 恶意软件检测的现状介绍<br></div><div class="callout-fold"><i icon-name="chevron-down"></i></div></div>
<div class="callout-content">
<p>
在过去的十年中，我们见证了移动设备的令人瞩目的进步。除了硬件之外，专为移动市场设计的操作系统 (OS) 也经历了成对的功能改进。截至 2021 年最后一个季度，Android 平台的市场份额接近 72%（Statista，2022），是领先的移动操作系统。它具有开源性质，可用于多种处理器架构。这些事实，加上可实现丰富服务（语音和图像识别、非接触式支付等）的记录良好的开发框架的可用性，促进了 Android 在智能手机之外的应用（Alaa 等人，2017 年； Do 等人，2017 年；Macario 等人，2009 年）。<br>
再加上这种日益流行的趋势，恶意软件作者对该操作系统的日益关注凸显了用户面临的风险（Xu et al.，2016b）。移动设备上存储的数据对于用户来说至关重要、敏感，并且已成为攻击者的宝贵目标。卡巴斯基表示，针对这些设备的广告软件和银行恶意软件是 2020 年的两个主要安全威胁，甚至在 Google Play 等可信应用市场中也被检测到（实验室，2021 年）。<br>
意识到这些问题，研究人员将机器学习 (ML) 技术视为实现 Android 恶意软件检测器的一种有前景的解决方案（Tan 等人，2015）。机器学习方法利用应用程序数据来识别对检测恶意软件有用的信号。为此，恶意软件检测可以遵循以下策略之一（或两种策略的组合）：（1）基于异常的检测侧重于从好软件构建配置文件，以便将与这些配置文件的偏差标记为危险； (2) 相反，基于误用的检测侧重于学习恶意软件和好软件的特征，以便识别它们在新应用程序中的存在（Molina-Coronado 等人，2020）。大多数关于Android恶意软件检测的研究工作属于第二类。更具体地说，其检测机制依靠有监督的 ML 算法（Faruki 等人，2014 年；Tam 等人，2017 年）。<br>
要使用机器学习算法（无论是针对滥用还是基于异常的系统）执行恶意软件检测，需要对应用程序进行预处理，以提取最能描述其行为的特征集。该任务是使用动态或静态软件分析技术来执行的。在动态分析中，应用程序的行为在受控环境（沙箱）中进行监控，在沙箱中模拟用户和系统交互。静态分析基于对应用程序包 (APK) 中包含的文件的检查，而无需运行代码。这些技术各有优点和缺点。一方面，通过动态分析，可以访问运行时加载并执行的代码。然而，就代码覆盖率而言，这种分析的成功很大程度上取决于模拟机制以及应用程序中是否缺少沙箱规避工具（Afianian 等人，2019）。另一方面，静态分析能够评估 APK 中存在的所有信息，但其成功在于缺乏诸如混淆或动态加载代码之类的规避技术（Moser 等，2007）。两种分析方法是互补的，可以结合起来进行 Android 恶意软件检测（Arshad 等人，2018 年；Spreitzenbarth 等人，2015 年）。<br>
研究人员在提出、开发和测试 Android 恶意软件检测器时面临的主要困难之一是缺乏通用且现实的评估框架。该框架应包括适当且带标签的数据集，这对于训练和/或测试机器学习算法至关重要。特别是，正如我们在本文中所说明的，大多数公开可用的数据集都已过时，仅包含恶意软件、重复样本或样本数量不足。鉴于此，作者选择通过从不同来源下载应用程序示例并使用 VirusTotal1 等工具对其进行标记来构建临时的自定义数据集。这个过程不仅成本高昂，而且还使基于机器学习的恶意软件检测建议的再现性和比较变得复杂。<br>
由于无法获得实现所提出方法的代码，或者在各自的出版物中遗漏了允许其实现的重要细节，从而加剧了可重复性问题。这对于使用 ML 算法的方法尤其明显，这些算法需要调整大量参数才能正常执行（Pendlebury 等人，2019），因为通常不提供此信息。评估程序也是如此。在许多情况下，它们没有得到明确描述，或者是在假设非常乐观的情况下设计的（Allix 等人，2016a；Pendlebury 等人，2019）。<br>
本研究的主要目的是对文献中已发表的 Android 恶意软件检测建议进行公平比较，揭示其实际有效性。鉴于多年来提出的大量提案，以及缺乏共同且现实的评估标准，对方法进行公平的比较并不是一项简单的任务。我们基于静态分析选择了 10 个使用不同特征和 ML 方法的流行检测器，并在通用评估框架下对它们进行了比较。在许多情况下，由于缺乏原作者的实现，需要重新实现检测器中使用的算法。据我们所知，这种广泛的实施和实验工作的结果是迄今为止对 Android 恶意软件检测方法最全面的比较研究。</p>
</div></div>
<p>这项工作的科学贡献总结如下：</p>
<ul>
<li>我们提出了一些对Android恶意软件检测器的准确性产生负面影响的因素。特别是，我们考虑了现实生活中存在的五个条件，但在提出恶意软件检测器时经常被忽略：(1)数据集包含大量几乎相同的应用程序;(2)对于什么是好软件，什么是恶意软件，人们并不总是达成一致，有些应用程序缺乏足够的共识，无法被视为恶意或良性；(3)好软件多于坏软件；（4)恶意软件作者可能会使用混淆技术进行逃避尝试；(5）恶意软件和好软件会随着时间的推移而进化。然后，我们认为在设计和评估Android恶意软件检测器时必须考虑所有这些因素，以提供真实的性能值。</li>
<li>考虑到上述因素后，我们分析了最先进的基于 ML 的 Android 恶意软件检测方法的性能。为此，我们选择了 10 个利用静态分析技术的极具影响力的探测器。我们表明，由于设计和评估缺陷，这些方法的作者提供的出色表现是不切实际的乐观。</li>
<li>我们强调该领域已发表的工作缺乏可重复性。从这个意义上说，我们公开了这项比较工作中使用的代码和数据集。</li>
<li>我们讨论 Android 恶意软件检测的未来研究方向，旨在解决已识别的设计和评估缺陷。</li>
</ul>
<p>本文的结构组织如下。第 2 部分回顾了与本文主题相关的最重要的著作。第 3 节包括有关 Android 应用程序、静态分析以及使用此技术可以获得的数据类型的基本概念。第 4 节介绍了本工作中考虑的基于监督 ML 分类器的最先进的检测器。第 5 节描述了通常如何构建恶意软件检测数据集及其局限性（构建它们时应考虑的因素，但经常被忽略）以及使用自定义数据集带来的再现性问题。在第 6 节中，我们介绍了我们的实验设置。第 7 节根据第 5 节中确定的因素的分析讨论了所选 Android 恶意软件检测器的局限性。第 8 节讨论了现实评估框架应考虑的特征，以及 Android 恶意软件中的挑战和未来研究方向检测。我们在第 9 节中总结本文。</p>
<h1 id="2" tabindex="-1">2 相关工作</h1>
<p>Android 恶意软件检测是信息安全文献中经过深入研究的领域。尽管如此，只有少数实验研究侧重于分析影响恶意软件检测器性能的因素，这也是本文的主题。他们中的大多数人将分析集中在一小群具有相似特征的探测器上。迄今为止，最全面的研究是 Pendlebury 等人。 （2019）。本文分析了三种检测算法评估中的两种不同的偏差来源。第一个称为空间偏差，来自数据集中每个类别的样本比例之间的差异。第二种类型是时间偏差，与模型训练期间包含未来知识有关。测试空间偏差的实验得出的结论是，类别之间的比例是作者报告的结果的决定因素。关于时间偏差影响的实验表明，随着时间的推移，模​​型往往会错误分类恶意软件，而好软件的准确性随着时间的推移保持稳定。这项工作得出的结论与之前另外两项研究中得出的结论类似，每项研究在实验中只考虑一个探测器（Allix 等人，2016a；Roy 等人，2015）。<br>
   Rastogi等人（2014）研究了恶意软件应用程序使用混淆技术来逃避检测。该研究对十款Android商业杀毒产品进行了分析，通过对恶意软件应用不同的混淆技术对其进行测试。结果证明，所有被分析的工具在检测至少一种混淆类型的恶意软件时的有效性都有所下降。这项工作突出了这些商业解决方案的弱点。然而，考虑到检测器的细节并不公开，关于混淆如何影响Android机器学习检测器的具体结论无法从本研究中得出。另一项工作评估了Windows机器学习恶意软件检测器识别打包恶意软件的能力（Aghakhani等人，2020)。进行了一系列广泛的实验，以确认包装样品是否由于包装人员留下的痕迹或样品的行为而被识别。作者总结说，依赖于静态分析特征的机器学习检测器倾向于关注混淆的迹象。因此，由于误报的数量，这些方法对Windows恶意软件的可行性提出了质疑。尽管如此，还需要进一步的研究来评估这些发现是否也适用于Android恶意软件检测器。<br>
   Surendran (2021) 部分讨论了设计和评估检测器时数据集中存在重复项的问题。对两种 ML 检测器进行了初步实验，一种基于 API 调用的使用，另一种使用权限。该工作的作者假设重复项与获得高估的模型性能之间存在关系。然而，需要额外的分析来证实这一假设，因为极端重复删除配置（使用充足的相似性阈值）的数据集大小的隐式减小最终可能会产生类似的结果。<br>
   综上所述，之前的工作主要集中在分析影响探测器的一些具体评估缺陷，包括：空间偏差（Allix et al., 2015；Pendlebury et al., 2019；Roy et al., 2015）、时间偏差（Allix et al., 2015）、时间偏差（Allix et al., 2015）、时间偏差（Allix et al., 2015） al.，2015；Pendlebury 等人，2019）、混淆的影响（Maiorca 等人，2015；Rastogi 等人，2014）或数据中重复项的影响（Surendran，2021）。然而，这些分析是通过少数方法进行的（Allix 等人，2016a；Roy 等人，2015；Surendran，2021），在某些情况下，利用了类似的特征集（Pendlebury 等人，2019） 。一些研究不够深入（Surendran，2021）或专门针对商业黑盒检测器进行，因此有关其检测机制的详细信息（即其特征或是否基于签名或 ML 算法）并未公开，并且结果无法推断（Maiorca 等人，2015 年；Rastogi 等人，2014 年）。这些已发表的作品都没有考虑到由于从数据集中删除既不明显是恶意软件的应用程序而造成的偏差，也没有分析在许多现有检测器上使用不同阈值将应用程序标记为恶意软件的效果。因此，我们认为，在 Android 恶意软件检测领域，必须进行更全面的分析，包括所有已识别的因素以及使用不同特征和机器学习方法的更多检测器。与已发表的文献相反，这份手稿不仅提供了一个比较框架，证明缺乏现实的建议，并说明了许多扩展的设计和评估偏差，而且还针对现实的恶意软件检测器的建议提出了建议并确定了未来的研究方向。</p>
<h1 id="3" tabindex="-1">3 背景</h1>
<p>本节稍微介绍一些理解手稿其余部分所需的背景知识。它包括有关 Android 应用程序结构的描述以及可以通过应用程序静态分析来检查以提供 ML 算法的信息类型。</p>
<h2 id="3-1-app" tabindex="-1">3.1 安卓app</h2>
<p>Android 应用程序以 APK（Android 应用程序包）形式分发。 APK 是一个 ZIP 压缩文件，其中包含在系统上执行应用程序所必需的资源：清单数据和编译的代码。</p>
<h3 id="3-1-1-manifest" tabindex="-1">3.1.1 Manifest 数据</h3>
<p>Android 应用程序的清单文件定义了应用程序运行所需的一组属性和组件。该文件采用 XML 格式，分为三个主要块或部分：</p>
<ul>
<li>应用程序组件块定义在应用程序运行时或用户向操作系统请求特定操作时与操作系统交互的应用程序元素。这些组件实现后台功能（服务）、管理用户屏幕和应用程序交互（活动）、启用应用程序与其他操作系统组件或应用程序（广播接收器和意图过滤器）的交互以及与其他进程（内容提供者）共享数据的接口。</li>
<li>硬件和软件功能块定义应用程序运行所需的操作系统属性和功能。这包括软件功能，例如备份支持、用户帐户管理、输入法等。硬件功能包括相机、蓝牙传输、指纹传感器等元素。声明请求的功能很有用，例如，可以防止应用程序运行在不符合所需规格的手机上。</li>
<li>权限块指示应用程序所需但受操作系统保护的功能。对这些功能的访问必须由用户明确授予。默认情况下，Android 应用程序无权执行可能危及操作系统、用户信息或其他应用程序的操作。因此，需要访问麦克风、摄像头、联系人列表、互联网连接、位置等的权限。</li>
</ul>
<h3 id="3-1-2" tabindex="-1">3.1.2 应用程序代码</h3>
<p>Android 应用程序通常使用 Java 或 Kotlin（Google 用于 Android 开发的首选语言）开发，并在编译过程中转换为 Dalvik 字节码格式。 Dalvik 字节码运行在 Android 虚拟机上，该虚拟机充当独立于平台的环境。由操作系统直接管理的移动设备的硬件组件与由虚拟机管理的应用程序之间的交互是通过 API 库执行的。这些 API 提供了一种访问应用程序所需的硬件功能的通用方法。因此，将程序员从设备的特殊性中抽象出来。<br>
   应用程序的 Dalvik 字节码位于 APK 内的classes.dex 文件中。它包括所有用户定义的类和函数，以及常量和变量定义。外部库（例如 Android 框架）不属于此文件的内容。</p>
<h2 id="3-2-app" tabindex="-1">3.2 安卓app的静态分析</h2>
<p>静态分析是一种软件技术，可检查应用程序以提取其特征，而无需在运行时执行代码并监控其行为（Li et al., 2017a）。通过静态分析，可以检查代码中存在的所有执行路径以及应用程序文件中的所有信息。这是通过使用具有代码解释机制的工具来完成的，这些工具提取描述应用程序内部功能的可理解的结构，例如调用图、数据流、有关代码结构的统计度量等。然后将这些信息转换为一组通用的解释性特征，稍后将由 ML 算法进行处理。<br>
  要对 APK 文件的内容进行静态分析，可以使用 AXMLprinter3 等工具来使清单文件中声明的字段和组件可访问。相反，可以使用 bakSmali4 等反编译器将classes.dex 文件转换为更高级别的格式。之后，可以获得不同的特征，包括有关指令、方法、类、字符串和 API 调用的使用的信息（Faruki et al., 2014）。还可以构建表示代码的不同图形结构。其中包括根据代码中存在的调用指令（调用）构建的调用图；控制流图，在创建时还考虑了由条件和循环语句（if、switch、for、while...）引起的代码跳转。在这两种类型的图中，节点代表只能顺序执行的方法或指令块，即基本块；边代表节点之间的执行流程（Li et al., 2017a）。<br>
  <strong>执行静态分析后，从 APK 获得的数据被映射到以结构化方式表示应用程序的特征向量</strong>，适合通过 ML 算法进行处理。图 1 描述了通过字符串、API 调用和权限来表示三个应用程序的二进制映射。它使用值 1 或 0 来表示应用程序代码中是否存在某个功能。其他映射也是可能的，例如，频率编码说明某个功能在应用程序代码中出现的次数。</p>
<h1 id="4-android" tabindex="-1">4 基于监督分类器的Android恶意软件检测器</h1>
<p>![](/img/user/czc知识库/杂七杂八/9-附件/附件/10个检测研究分析：Towards a fair comparison and realistic evaluation framework of android malware detectors based on static analysis and machine learning_image.png)</p>
</main>
<aside>
<div class="sidebar">
<div class="sidebar-container">
<div class="toc">
<div class="toc-title-container">
<div class="toc-title">
On this page
</div>
</div>
<div class="toc-container">
<nav class="toc">
<ol>
<li><a href="#实操笔记">实操笔记</a>
</li>
<li><a href="#翻译">翻译</a>
</li>
<li><a href="#android">基于静态分析和机器学习的 Android 恶意软件检测器的公平比较和现实评估框架</a>
</li>
<li><a href="#介绍">介绍</a>
</li>
<li><a href="#2">2 相关工作</a>
</li>
<li><a href="#3">3 背景</a>
<ol>
<li><a href="#3-1-app">3.1 安卓app</a>
<ol>
<li><a href="#3-1-1-manifest">3.1.1 Manifest 数据</a>
</li>
<li><a href="#3-1-2">3.1.2 应用程序代码</a>
</li>
</ol>
</li>
<li><a href="#3-2-app">3.2 安卓app的静态分析</a>
</li>
</ol>
</li>
<li><a href="#4-android">4 基于监督分类器的Android恶意软件检测器</a>
</li>
</ol>
</nav>
</div>
</div>
<div class="backlinks">
<div class="backlink-title" style="margin:4px 0!important">Pages mentioning this page</div>
<div class="backlink-list"><div class="backlink-card"><i icon-name="link"></i><a href="/硕士研究生/科研/文献阅读笔记/文献阅读笔记/" data-note-icon="" class="backlink">文献阅读笔记</a>
</div></div>
</div>
</div>
</div>
</aside>
<style>#tooltip-wrapper{background:var(--background-primary);padding:1em;border-radius:4px;overflow:hidden;position:fixed;width:80%;max-width:400px;height:auto;max-height:300px;font-size:.8em;box-shadow:0 5px 10px rgba(0,0,0,.1);opacity:0;transition:opacity .1s;unicode-bidi:plaintext;overflow-y:scroll;z-index:10}#tooltip-wrapper:after{content:"";position:absolute;z-index:1;bottom:0;left:0;pointer-events:none;width:100%;unicode-bidi:plaintext;height:75px}</style>
<div style="opacity:0;display:none" id="tooltip-wrapper">
<div id="tooltip-content">
</div>
</div>
<iframe style="display:none;height:0;width:0" id="link-preview-iframe" src="">
</iframe>
<script>var opacityTimeout,contentTimeout,transitionDurationMs=100,iframe=document.getElementById("link-preview-iframe"),tooltipWrapper=document.getElementById("tooltip-wrapper"),tooltipContent=document.getElementById("tooltip-content"),linkHistories={};function hideTooltip(){opacityTimeout=setTimeout((function(){tooltipWrapper.style.opacity=0,contentTimeout=setTimeout((function(){tooltipContent.innerHTML="",tooltipWrapper.style.display="none"}),transitionDurationMs+1)}),transitionDurationMs)}function showTooltip(t){var e=t.target,o=e.getClientRects()[e.getClientRects().length-1],i=window.pageYOffset||document.documentElement.scrollTop,n=t.target.getAttribute("href");if(-1===n.indexOf("http")||-1!==n.indexOf(window.location.host)){let t=n.split("#")[0];linkHistories[t]?(tooltipContent.innerHTML=linkHistories[t],tooltipWrapper.style.display="block",setTimeout((function(){if(tooltipWrapper.style.opacity=1,-1!=n.indexOf("#")){let t=n.split("#")[1];const e=tooltipWrapper.querySelector(`[id='${t}']`);e.classList.add("referred"),e.scrollIntoView({behavior:"smooth"},!0)}else tooltipWrapper.scroll(0,0)}),1)):(iframe.src=t,iframe.onload=function(){tooltipContentHtml="",tooltipContentHtml+='<div style="font-weight: bold; unicode-bidi: plaintext;">'+iframe.contentWindow.document.querySelector("h1").innerHTML+"</div>",tooltipContentHtml+=iframe.contentWindow.document.querySelector(".content").innerHTML,tooltipContent.innerHTML=tooltipContentHtml,linkHistories[t]=tooltipContentHtml,tooltipWrapper.style.display="block",tooltipWrapper.scrollTop=0,setTimeout((function(){if(tooltipWrapper.style.opacity=1,-1!=n.indexOf("#")){let t=n.split("#")[1];const e=tooltipWrapper.querySelector(`[id='${t}']`);e.classList.add("referred"),console.log(e),e.scrollIntoView({behavior:"smooth"},!0)}else tooltipWrapper.scroll(0,0)}),1)}),tooltipWrapper.style.left=o.left-tooltipWrapper.offsetWidth/2+o.width/2+"px",window.innerHeight-o.top<tooltipWrapper.offsetHeight?tooltipWrapper.style.top=o.top+i-tooltipWrapper.offsetHeight-10+"px":window.innerHeight-o.top>tooltipWrapper.offsetHeight&&(tooltipWrapper.style.top=o.top+i+35+"px"),o.left+o.width/2<tooltipWrapper.offsetWidth/2?tooltipWrapper.style.left="10px":document.body.clientWidth-o.left-o.width/2<tooltipWrapper.offsetWidth/2&&(tooltipWrapper.style.left=document.body.clientWidth-tooltipWrapper.offsetWidth-20+"px")}}function setupListeners(t){t.addEventListener("mouseleave",(function(t){hideTooltip()})),tooltipWrapper.addEventListener("mouseleave",(function(t){hideTooltip()})),t.addEventListener("mouseenter",(function(t){clearTimeout(opacityTimeout),clearTimeout(contentTimeout),showTooltip(t)})),tooltipWrapper.addEventListener("mouseenter",(function(t){clearTimeout(opacityTimeout),clearTimeout(contentTimeout)}))}window.addEventListener("load",(function(t){document.querySelectorAll(".internal-link").forEach(setupListeners),document.querySelectorAll(".backlink-card a").forEach(setupListeners)}))</script>
<script>window.location.hash&&document.getElementById(window.location.hash.slice(1)).classList.add("referred"),window.addEventListener("hashchange",(e=>{const t=e.oldURL.split("#");t[1]&&document.getElementById(t[1]).classList.remove("referred");const n=e.newURL.split("#");n[1]&&document.getElementById(n[1]).classList.add("referred")}),!1);const url_parts=window.location.href.split("#"),url=url_parts[0],referrence=url_parts[1];document.querySelectorAll(".cm-s-obsidian > *[id]").forEach((function(e){e.ondblclick=function(e){const t=url+"#"+e.target.id;navigator.clipboard.writeText(t)}}))</script>
<script src="https://fastly.jsdelivr.net/npm/luxon@3.2.1/build/global/luxon.min.js"></script>
<script defer="defer">TIMESTAMP_FORMAT="MMM dd, yyyy h:mm a",document.querySelectorAll(".human-date").forEach((function(e){date=e.getAttribute("data-date")||e.innerText,parsed_date=luxon.DateTime.fromISO(date),null!=parsed_date.invalid&&(parsed_date=luxon.DateTime.fromSQL(date)),null!=parsed_date.invalid&&(parsed_date=luxon.DateTime.fromHTML(date)),e.innerHTML=parsed_date.toFormat(TIMESTAMP_FORMAT)}))</script>
<script>lucide.createIcons({attrs:{class:["svg-icon"]}})</script>
</body>
</html>
